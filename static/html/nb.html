<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>69e21e5a06aa40aa983f50165aa4dc5b</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="imports" class="cell markdown" id="nH9UUvNKBfTn">
<h1>Imports</h1>
</section>
<div class="cell code" data-execution_count="1" id="Wduwu_3yIJAi">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span></code></pre></div>
</div>
<section id="loading-dataset" class="cell markdown" id="CJhpeYCABt5Q">
<h1>Loading Dataset</h1>
</section>
<div class="cell code" data-execution_count="3"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="obe3B0nsJyAU" data-outputId="66264e31-6577-474c-9a1d-dd2a4741ef47">
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;../dataset/Motor_Vehicle_Collisions.csv&quot;</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>&lt;ipython-input-3-4e57de93912b&gt;:1: DtypeWarning: Columns (3) have mixed types. Specify dtype option on import or set low_memory=False.
  df = pd.read_csv(&quot;drive/MyDrive/MidTermPython/Motor_Vehicle_Collisions.csv&quot;)
</code></pre>
</div>
</div>
<section id="dataset-preparation" class="cell markdown"
id="-91R7AguBWu9">
<h1>Dataset Preparation</h1>
</section>
<div class="cell markdown" data-collapsed="false">

</div>
<div class="cell markdown" id="HZHRuZ3YD4VL">
<p><strong>Renaming columns</strong></p>
</div>
<div class="cell code" data-execution_count="4" id="2Z06fvfSOq9v">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.replace(<span class="st">&#39; &#39;</span>, <span class="st">&#39;_&#39;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.lower()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="5"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:612}"
id="IMli5BbWKxZd" data-outputId="0c4982fc-18a5-4c90-cf9a-f72b15378617">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="5">

  <div id="df-73933765-4eea-4a80-a794-8476922707d3" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>crash_date</th>
      <th>crash_time</th>
      <th>borough</th>
      <th>zip_code</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>location</th>
      <th>on_street_name</th>
      <th>cross_street_name</th>
      <th>off_street_name</th>
      <th>...</th>
      <th>contributing_factor_vehicle_2</th>
      <th>contributing_factor_vehicle_3</th>
      <th>contributing_factor_vehicle_4</th>
      <th>contributing_factor_vehicle_5</th>
      <th>collision_id</th>
      <th>vehicle_type_code_1</th>
      <th>vehicle_type_code_2</th>
      <th>vehicle_type_code_3</th>
      <th>vehicle_type_code_4</th>
      <th>vehicle_type_code_5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>09/11/2021</td>
      <td>2:39</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>WHITESTONE EXPRESSWAY</td>
      <td>20 AVENUE</td>
      <td>NaN</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4455765</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>03/26/2022</td>
      <td>11:45</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>QUEENSBORO BRIDGE UPPER</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4513547</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>06/29/2022</td>
      <td>6:55</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>THROGS NECK BRIDGE</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4541903</td>
      <td>Sedan</td>
      <td>Pick-up Truck</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>09/11/2021</td>
      <td>9:35</td>
      <td>BROOKLYN</td>
      <td>11208.0</td>
      <td>40.667202</td>
      <td>-73.866500</td>
      <td>(40.667202, -73.8665)</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1211      LORING AVENUE</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4456314</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12/14/2021</td>
      <td>8:13</td>
      <td>BROOKLYN</td>
      <td>11233.0</td>
      <td>40.683304</td>
      <td>-73.917274</td>
      <td>(40.683304, -73.917274)</td>
      <td>SARATOGA AVENUE</td>
      <td>DECATUR STREET</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4486609</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>04/14/2021</td>
      <td>12:47</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MAJOR DEEGAN EXPRESSWAY RAMP</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4407458</td>
      <td>Dump</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>12/14/2021</td>
      <td>17:05</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>40.709183</td>
      <td>-73.956825</td>
      <td>(40.709183, -73.956825)</td>
      <td>BROOKLYN QUEENS EXPRESSWAY</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4486555</td>
      <td>Sedan</td>
      <td>Tractor Truck Diesel</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>12/14/2021</td>
      <td>8:17</td>
      <td>BRONX</td>
      <td>10475.0</td>
      <td>40.868160</td>
      <td>-73.831480</td>
      <td>(40.86816, -73.83148)</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>344       BAYCHESTER AVENUE</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4486660</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>12/14/2021</td>
      <td>21:10</td>
      <td>BROOKLYN</td>
      <td>11207.0</td>
      <td>40.671720</td>
      <td>-73.897100</td>
      <td>(40.67172, -73.8971)</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2047      PITKIN AVENUE</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4487074</td>
      <td>Sedan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>12/14/2021</td>
      <td>14:58</td>
      <td>MANHATTAN</td>
      <td>10017.0</td>
      <td>40.751440</td>
      <td>-73.973970</td>
      <td>(40.75144, -73.97397)</td>
      <td>3 AVENUE</td>
      <td>EAST 43 STREET</td>
      <td>NaN</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>4486519</td>
      <td>Sedan</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>10 rows × 29 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-73933765-4eea-4a80-a794-8476922707d3')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-73933765-4eea-4a80-a794-8476922707d3 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-73933765-4eea-4a80-a794-8476922707d3');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-9bf900c8-c105-459d-b576-d503362dcf88">
  <button class="colab-df-quickchart" onclick="quickchart('df-9bf900c8-c105-459d-b576-d503362dcf88')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-9bf900c8-c105-459d-b576-d503362dcf88 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>

</div>
</div>
<div class="cell markdown" id="23K28US5D-1a">
<p><strong>Some useful information</strong></p>
</div>
<div class="cell code" data-execution_count="6"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="LGCkLAkSRyKs" data-outputId="985a5e4d-c881-484c-ccf9-3e6ffbef17a2">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Shape of the DataFrame (rows/columns):&#39;</span>, df.shape)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Shape of the DataFrame (rows/columns): (2034019, 29)
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="7"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="AFxvHw-31vy6" data-outputId="237081b8-7400-4d34-8398-bbdbd593326c">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 2034019 entries, 0 to 2034018
Data columns (total 29 columns):
 #   Column                         Dtype  
---  ------                         -----  
 0   crash_date                     object 
 1   crash_time                     object 
 2   borough                        object 
 3   zip_code                       object 
 4   latitude                       float64
 5   longitude                      float64
 6   location                       object 
 7   on_street_name                 object 
 8   cross_street_name              object 
 9   off_street_name                object 
 10  number_of_persons_injured      float64
 11  number_of_persons_killed       float64
 12  number_of_pedestrians_injured  int64  
 13  number_of_pedestrians_killed   int64  
 14  number_of_cyclist_injured      int64  
 15  number_of_cyclist_killed       int64  
 16  number_of_motorist_injured     int64  
 17  number_of_motorist_killed      int64  
 18  contributing_factor_vehicle_1  object 
 19  contributing_factor_vehicle_2  object 
 20  contributing_factor_vehicle_3  object 
 21  contributing_factor_vehicle_4  object 
 22  contributing_factor_vehicle_5  object 
 23  collision_id                   int64  
 24  vehicle_type_code_1            object 
 25  vehicle_type_code_2            object 
 26  vehicle_type_code_3            object 
 27  vehicle_type_code_4            object 
 28  vehicle_type_code_5            object 
dtypes: float64(4), int64(7), object(18)
memory usage: 450.0+ MB
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="8"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="FFu68nfW103K" data-outputId="fdcbb6fa-52cc-4a96-f6fb-255dd2b45bed">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df.isna().<span class="bu">sum</span>()</span></code></pre></div>
<div class="output execute_result" data-execution_count="8">
<pre><code>crash_date                             0
crash_time                             0
borough                           632787
zip_code                          633028
latitude                          230884
longitude                         230884
location                          230884
on_street_name                    429166
cross_street_name                 763510
off_street_name                  1697226
number_of_persons_injured             18
number_of_persons_killed              31
number_of_pedestrians_injured          0
number_of_pedestrians_killed           0
number_of_cyclist_injured              0
number_of_cyclist_killed               0
number_of_motorist_injured             0
number_of_motorist_killed              0
contributing_factor_vehicle_1       6442
contributing_factor_vehicle_2     311455
contributing_factor_vehicle_3    1889497
contributing_factor_vehicle_4    2001552
contributing_factor_vehicle_5    2025235
collision_id                           0
vehicle_type_code_1                12917
vehicle_type_code_2               382101
vehicle_type_code_3              1894593
vehicle_type_code_4              2002641
vehicle_type_code_5              2025502
dtype: int64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="9"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="rPy1JTN62DvN" data-outputId="1296f74f-b9b5-431f-91b9-f9edc45af21e">
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(df.isna().<span class="bu">sum</span>() <span class="op">/</span> <span class="bu">len</span>(df) <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>).sort_values(ascending <span class="op">=</span> <span class="va">False</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="9">
<pre><code>vehicle_type_code_5              99.58
contributing_factor_vehicle_5    99.57
vehicle_type_code_4              98.46
contributing_factor_vehicle_4    98.40
vehicle_type_code_3              93.15
contributing_factor_vehicle_3    92.89
off_street_name                  83.44
cross_street_name                37.54
zip_code                         31.12
borough                          31.11
on_street_name                   21.10
vehicle_type_code_2              18.79
contributing_factor_vehicle_2    15.31
location                         11.35
longitude                        11.35
latitude                         11.35
vehicle_type_code_1               0.64
contributing_factor_vehicle_1     0.32
collision_id                      0.00
crash_date                        0.00
number_of_motorist_killed         0.00
number_of_motorist_injured        0.00
number_of_cyclist_killed          0.00
crash_time                        0.00
number_of_pedestrians_killed      0.00
number_of_pedestrians_injured     0.00
number_of_persons_killed          0.00
number_of_persons_injured         0.00
number_of_cyclist_injured         0.00
dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown" id="MWWU-ZWvC0hF">
<p><strong>Removing NaN values</strong></p>
</div>
<div class="cell code" data-execution_count="10" id="Sq22Z9JQ2RSa">
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop(columns <span class="op">=</span> [</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;vehicle_type_code_5&#39;</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contributing_factor_vehicle_5&#39;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;vehicle_type_code_4&#39;</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contributing_factor_vehicle_4&#39;</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;vehicle_type_code_3&#39;</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contributing_factor_vehicle_3&#39;</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;off_street_name&#39;</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;zip_code&#39;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>df.drop(<span class="st">&#39;location&#39;</span>, axis <span class="op">=</span> <span class="dv">1</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="11"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="jt0oZerg21rp" data-outputId="5944b471-ce6e-4f48-f27d-e091ddd3b93c">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(df.isna().<span class="bu">sum</span>() <span class="op">/</span> <span class="bu">len</span>(df) <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>).sort_values(ascending <span class="op">=</span> <span class="va">False</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="11">
<pre><code>cross_street_name                37.54
borough                          31.11
on_street_name                   21.10
vehicle_type_code_2              18.79
contributing_factor_vehicle_2    15.31
latitude                         11.35
longitude                        11.35
vehicle_type_code_1               0.64
contributing_factor_vehicle_1     0.32
number_of_motorist_injured        0.00
collision_id                      0.00
number_of_motorist_killed         0.00
crash_date                        0.00
number_of_cyclist_killed          0.00
number_of_cyclist_injured         0.00
crash_time                        0.00
number_of_pedestrians_injured     0.00
number_of_persons_killed          0.00
number_of_persons_injured         0.00
number_of_pedestrians_killed      0.00
dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="12"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="e3bJBXmE28vp" data-outputId="3d702e21-33d2-4485-d10e-7ed9108d5326">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Before cleaning:&#39;</span>, df.shape)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.dropna()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;After cleaning:&#39;</span>, df.shape)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Before cleaning: (2034019, 20)
After cleaning: (880392, 20)
</code></pre>
</div>
</div>
<div class="cell markdown" id="6Ncrtt7jC-Ax">
<p><strong>Transforming objects to DateTime</strong></p>
</div>
<div class="cell code" data-execution_count="13" id="bWgcFmUZ3Z1O">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># datetime for [&#39;crash_date&#39;]</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;crash_date&#39;</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">&#39;crash_date&#39;</span>])</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  df.time for [&#39;crash_time&#39;]</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;crash_time&#39;</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">&#39;crash_time&#39;</span>], <span class="bu">format</span><span class="op">=</span><span class="st">&#39;%H:%M&#39;</span>).dt.time</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># making &#39;crash_hour&#39;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;crash_hour&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_time&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.strftime(<span class="st">&#39;%H&#39;</span>)).astype(<span class="bu">int</span>)</span></code></pre></div>
</div>
<div class="cell markdown" id="V-d1z9W59uAl">
<p><strong>Adding fields with information about
<code>year/season/month/day</code></strong></p>
</div>
<div class="cell code" data-execution_count="14" id="RiHLUDmYINqx">
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;day&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.day</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;month&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.month</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;year&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.year</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="15" id="A-Ph5vJE2e87">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_season(month):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="dv">3</span> <span class="op">&lt;=</span> month <span class="op">&lt;=</span> <span class="dv">5</span>:</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Spring&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">6</span> <span class="op">&lt;=</span> month <span class="op">&lt;=</span> <span class="dv">8</span>:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Summer&quot;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="dv">9</span> <span class="op">&lt;=</span> month <span class="op">&lt;=</span> <span class="dv">11</span>:</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Autumn&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Winter&quot;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;season&quot;</span>] <span class="op">=</span> df[<span class="st">&quot;month&quot;</span>].<span class="bu">apply</span>(get_season)</span></code></pre></div>
</div>
<div class="cell markdown" id="NpKwHRPy-B9J">
<p><strong>Adding information about total consequences of every
accident</strong></p>
</div>
<div class="cell code" data-execution_count="16" id="v6GqdcCgJTpw">
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;consequences_of_an_accident&#39;</span>] <span class="op">=</span> df[[</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_injured&#39;</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_killed&#39;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_injured&#39;</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_killed&#39;</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_injured&#39;</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_killed&#39;</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_injured&#39;</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_killed&#39;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    ]].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div class="cell markdown" id="Dg7BGnSbDGZ-">
<p><strong>Showing prepared dataset</strong></p>
</div>
<div class="cell code" data-execution_count="40"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:933}"
id="Tdgaokxn3DWR" data-outputId="f07f351e-4907-408b-cf35-1a46671408fd">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>display(df.head())</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.info())</span></code></pre></div>
<div class="output display_data">

  <div id="df-c66b2753-9421-4367-8c19-3a03aed283f8" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>crash_date</th>
      <th>crash_time</th>
      <th>borough</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>on_street_name</th>
      <th>cross_street_name</th>
      <th>number_of_persons_injured</th>
      <th>number_of_persons_killed</th>
      <th>number_of_pedestrians_injured</th>
      <th>...</th>
      <th>contributing_factor_vehicle_2</th>
      <th>collision_id</th>
      <th>vehicle_type_code_1</th>
      <th>vehicle_type_code_2</th>
      <th>crash_hour</th>
      <th>day</th>
      <th>month</th>
      <th>year</th>
      <th>season</th>
      <th>consequences_of_an_accident</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>2021-12-14</td>
      <td>14:58:00</td>
      <td>MANHATTAN</td>
      <td>40.751440</td>
      <td>-73.973970</td>
      <td>3 AVENUE</td>
      <td>EAST 43 STREET</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4486519</td>
      <td>Sedan</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>14</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2021-12-14</td>
      <td>16:50:00</td>
      <td>QUEENS</td>
      <td>40.675884</td>
      <td>-73.755770</td>
      <td>SPRINGFIELD BOULEVARD</td>
      <td>EAST GATE PLAZA</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487127</td>
      <td>Sedan</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>16</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2021-12-14</td>
      <td>23:10:00</td>
      <td>QUEENS</td>
      <td>40.666840</td>
      <td>-73.789410</td>
      <td>NORTH CONDUIT AVENUE</td>
      <td>150 STREET</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4486635</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>23</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2021-12-11</td>
      <td>19:43:00</td>
      <td>BRONX</td>
      <td>40.872620</td>
      <td>-73.904686</td>
      <td>WEST KINGSBRIDGE ROAD</td>
      <td>HEATH AVENUE</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487040</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>Sedan</td>
      <td>19</td>
      <td>11</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2021-12-13</td>
      <td>17:40:00</td>
      <td>STATEN ISLAND</td>
      <td>40.631650</td>
      <td>-74.087620</td>
      <td>VICTORY BOULEVARD</td>
      <td>WOODSTOCK AVENUE</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487001</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>17</td>
      <td>13</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-c66b2753-9421-4367-8c19-3a03aed283f8')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-c66b2753-9421-4367-8c19-3a03aed283f8 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-c66b2753-9421-4367-8c19-3a03aed283f8');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-19402520-2b60-40bb-899c-4da802968028">
  <button class="colab-df-quickchart" onclick="quickchart('df-19402520-2b60-40bb-899c-4da802968028')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-19402520-2b60-40bb-899c-4da802968028 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>

</div>
<div class="output stream stdout">
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 880392 entries, 9 to 2034017
Data columns (total 26 columns):
 #   Column                         Non-Null Count   Dtype         
---  ------                         --------------   -----         
 0   crash_date                     880392 non-null  datetime64[ns]
 1   crash_time                     880392 non-null  object        
 2   borough                        880392 non-null  object        
 3   latitude                       880392 non-null  float64       
 4   longitude                      880392 non-null  float64       
 5   on_street_name                 880392 non-null  object        
 6   cross_street_name              880392 non-null  object        
 7   number_of_persons_injured      880392 non-null  float64       
 8   number_of_persons_killed       880392 non-null  float64       
 9   number_of_pedestrians_injured  880392 non-null  int64         
 10  number_of_pedestrians_killed   880392 non-null  int64         
 11  number_of_cyclist_injured      880392 non-null  int64         
 12  number_of_cyclist_killed       880392 non-null  int64         
 13  number_of_motorist_injured     880392 non-null  int64         
 14  number_of_motorist_killed      880392 non-null  int64         
 15  contributing_factor_vehicle_1  880392 non-null  object        
 16  contributing_factor_vehicle_2  880392 non-null  object        
 17  collision_id                   880392 non-null  int64         
 18  vehicle_type_code_1            880392 non-null  object        
 19  vehicle_type_code_2            880392 non-null  object        
 20  crash_hour                     880392 non-null  int64         
 21  day                            880392 non-null  int64         
 22  month                          880392 non-null  int64         
 23  year                           880392 non-null  int64         
 24  season                         880392 non-null  object        
 25  consequences_of_an_accident    880392 non-null  float64       
dtypes: datetime64[ns](1), float64(5), int64(11), object(9)
memory usage: 181.4+ MB
None
</code></pre>
</div>
</div>
<section id="descriptive-stats" class="cell markdown" id="PY_dhAOBEnCB">
<h1>Descriptive stats</h1>
</section>
<div class="cell code" data-execution_count="18"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="TLtkAwNfEmUN" data-outputId="ad6b82a3-024c-4173-9070-c8424e09e656">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Number of motorists injured:&quot;</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Mean: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_motorist_injured&#39;</span>]<span class="sc">.</span>mean()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Median: </span><span class="sc">{</span>(df[<span class="st">&#39;number_of_motorist_injured&#39;</span>].<span class="bu">max</span>() <span class="op">+</span> df[<span class="st">&#39;number_of_motorist_injured&#39;</span>].<span class="bu">min</span>()) <span class="op">/</span> <span class="dv">2</span><span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Standart deviation: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_motorist_injured&#39;</span>]<span class="sc">.</span>std()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, end<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n\n</span><span class="st">&#39;</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Number of pedestrians injured:&quot;</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Mean: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_pedestrians_injured&#39;</span>]<span class="sc">.</span>mean()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Median: </span><span class="sc">{</span>(df[<span class="st">&#39;number_of_pedestrians_injured&#39;</span>].<span class="bu">max</span>() <span class="op">+</span> df[<span class="st">&#39;number_of_pedestrians_injured&#39;</span>].<span class="bu">min</span>()) <span class="op">/</span> <span class="dv">2</span><span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Standart deviation: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_pedestrians_injured&#39;</span>]<span class="sc">.</span>std()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, end<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n\n</span><span class="st">&#39;</span>)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Number of cyclists injured:&quot;</span>,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Mean: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_cyclist_injured&#39;</span>]<span class="sc">.</span>mean()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Median: </span><span class="sc">{</span>(df[<span class="st">&#39;number_of_cyclist_injured&#39;</span>].<span class="bu">max</span>() <span class="op">+</span> df[<span class="st">&#39;number_of_cyclist_injured&#39;</span>].<span class="bu">min</span>()) <span class="op">/</span> <span class="dv">2</span><span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f&quot;  Standart deviation: </span><span class="sc">{</span>df[<span class="st">&#39;number_of_cyclist_injured&#39;</span>]<span class="sc">.</span>std()<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    sep<span class="op">=</span><span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Number of motorists injured:
  Mean: 0.2352111332224736
  Median: 21.5
  Standart deviation: 0.6903676519073746

Number of pedestrians injured:
  Mean: 0.0029668602168125106
  Median: 7.5
  Standart deviation: 0.06812785250106211

Number of cyclists injured:
  Mean: 0.03439831347854138
  Median: 2.0
  Standart deviation: 0.1842028728786876
</code></pre>
</div>
</div>
<section id="analytics" class="cell markdown" id="7V59ND6VB2gn">
<h1>Analytics</h1>
</section>
<div class="cell markdown" id="z3IDyB0_DTCm">
<p><strong>Number of traffic accidents depending on the city
district</strong></p>
</div>
<div class="cell code" data-execution_count="19"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:807}"
id="NehCS1QF6o-e" data-outputId="8a0e0ed2-c18c-4087-fbec-7937fb336410">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>borough_accidents <span class="op">=</span> df.borough.value_counts()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>borough_accidents, y<span class="op">=</span>borough_accidents.index)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Number of traffic accidents depending on the city district&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, color <span class="op">=</span> <span class="st">&#39;grey&#39;</span>, axis <span class="op">=</span> <span class="st">&#39;x&#39;</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Borough&quot;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/district.png" /></p>
</div>
</div>
<div class="cell markdown" id="BgkYMwF7DbF4">
<p><strong>Road accidents by time</strong></p>
</div>
<div class="cell code" data-execution_count="20"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:807}"
id="_jVfrM1u72LP" data-outputId="33164b2f-7553-439b-d5d4-ac7b760f885f">
<div class="sourceCode" id="cb28"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>sns.lineplot(df[<span class="st">&#39;crash_date&#39;</span>].value_counts())</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Road accidents by time&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Year&quot;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Count&quot;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/bytime.png" /></p>
</div>
</div>
<div class="cell markdown" id="7COCOLQ7DhLm">
<p><strong>Road accidents by day of the week</strong></p>
</div>
<div class="cell code" data-execution_count="21"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:807}"
id="axlDfxti8b3I" data-outputId="f338cdac-246b-4276-d7e2-1f8e5accb14f">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the day of the week and reorder it starting from Monday</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>days <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.day_name().value_counts()</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>days <span class="op">=</span> days.reindex([<span class="st">&#39;Monday&#39;</span>, <span class="st">&#39;Tuesday&#39;</span>, <span class="st">&#39;Wednesday&#39;</span>, <span class="st">&#39;Thursday&#39;</span>, <span class="st">&#39;Friday&#39;</span>, <span class="st">&#39;Saturday&#39;</span>, <span class="st">&#39;Sunday&#39;</span>])</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>sns.barplot(y<span class="op">=</span>days, x<span class="op">=</span>days.index)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Road accidents by day of the week&#39;</span>, fontweight<span class="op">=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Day&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">&#39;grey&#39;</span>, axis <span class="op">=</span> <span class="st">&#39;y&#39;</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/byday.png" /></p>
</div>
</div>
<div class="cell markdown" id="PtJIJWxPDmZP">
<p><strong>Car Accidents by Hour</strong></p>
</div>
<div class="cell code" data-execution_count="22"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:807}"
id="MXCOGveg9Dc1" data-outputId="4134164c-0840-40ff-d2df-f94cfb66f8a6">
<div class="sourceCode" id="cb30"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>all_hours <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">24</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the accidents by hour</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>hour_counts <span class="op">=</span> df[<span class="st">&#39;crash_hour&#39;</span>].value_counts().reindex(all_hours)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the line plot</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>hour_counts.index, y<span class="op">=</span>hour_counts)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Car Accidents by Hour&#39;</span>, fontweight<span class="op">=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>, fontweight<span class="op">=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Hour&#39;</span>, fontweight<span class="op">=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>, color<span class="op">=</span><span class="st">&#39;grey&#39;</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>plt.xticks(all_hours)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/byhour.png" /></p>
</div>
</div>
<div class="cell markdown" id="3GSjBuuEDqvJ">
<p><strong>Road accidents by month</strong></p>
</div>
<div class="cell code" data-execution_count="23"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:807}"
id="6V5fOSi39TuZ" data-outputId="59f6e317-b861-4f37-dff9-24ec044cc9f2">
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the month and reorder it starting from Monday</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.month_name().value_counts()</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> months.reindex([<span class="st">&#39;January&#39;</span>, <span class="st">&#39;February&#39;</span>, <span class="st">&#39;March&#39;</span>, <span class="st">&#39;April&#39;</span>, <span class="st">&#39;May&#39;</span>, <span class="st">&#39;June&#39;</span>, <span class="st">&#39;July&#39;</span>, <span class="st">&#39;August&#39;</span>, <span class="st">&#39;September&#39;</span>, <span class="st">&#39;October&#39;</span>, <span class="st">&#39;November&#39;</span>, <span class="st">&#39;December&#39;</span>])</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>sns.barplot(y<span class="op">=</span>months, x<span class="op">=</span>months.index)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Road accidents by month&#39;</span>, fontweight<span class="op">=</span><span class="st">&#39;bold&#39;</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Month&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">&#39;grey&#39;</span>, axis <span class="op">=</span> <span class="st">&#39;y&#39;</span>)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/bymonth.png" /></p>
</div>
</div>
<div class="cell markdown" id="nwex9lgPDvEx">
<p><strong>Distribution of consequences in accidents</strong></p>
</div>
<div class="cell code" data-execution_count="24"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:811}"
id="l7e7avzm9jI7" data-outputId="cfce54d1-9c7d-4f1b-8577-a06ca41a060f">
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>consequences <span class="op">=</span> df[[<span class="st">&#39;number_of_persons_injured&#39;</span>, <span class="st">&#39;number_of_persons_killed&#39;</span>,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;number_of_pedestrians_injured&#39;</span>, <span class="st">&#39;number_of_pedestrians_killed&#39;</span>,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;number_of_cyclist_injured&#39;</span>, <span class="st">&#39;number_of_cyclist_killed&#39;</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;number_of_motorist_injured&#39;</span>, <span class="st">&#39;number_of_motorist_killed&#39;</span>]].<span class="bu">sum</span>()</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [col.split(<span class="st">&#39; &#39;</span>)[<span class="op">-</span><span class="dv">2</span>:] <span class="cf">for</span> col <span class="kw">in</span> consequences.index]</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">&#39; &#39;</span>.join(words).lower() <span class="cf">for</span> words <span class="kw">in</span> labels]</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>plt.pie(consequences, labels<span class="op">=</span>labels, autopct<span class="op">=</span><span class="st">&#39;</span><span class="sc">%1.1f%%</span><span class="st">&#39;</span>, startangle<span class="op">=</span><span class="dv">140</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">&#39;equal&#39;</span>)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Distribution of consequences in accidents&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>total_sum <span class="op">=</span> consequences.<span class="bu">sum</span>()</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>plt.text(<span class="dv">0</span>, <span class="op">-</span><span class="fl">1.2</span>, <span class="ss">f&#39;Total: </span><span class="sc">{</span>total_sum<span class="sc">}</span><span class="ss">&#39;</span>, fontsize<span class="op">=</span><span class="dv">12</span>, ha<span class="op">=</span><span class="st">&#39;center&#39;</span>)</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/consequences.png" /></p>
</div>
</div>
<div class="cell markdown" id="g6xik8ho1dMz">
<p><strong>Number Of Collisions by Year and Season</strong></p>
</div>
<div class="cell code" data-execution_count="25"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:722}"
id="cxapWdbj1Bqm" data-outputId="73be91d3-57e4-46ee-a348-0a682ce3a335">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>seasons_crash <span class="op">=</span> df.groupby([<span class="st">&quot;year&quot;</span>, <span class="st">&quot;season&quot;</span>]).size().reset_index(name<span class="op">=</span><span class="st">&quot;Number Of Collisions&quot;</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>seasons_order <span class="op">=</span> [<span class="st">&quot;Spring&quot;</span>, <span class="st">&quot;Summer&quot;</span>, <span class="st">&quot;Autumn&quot;</span>, <span class="st">&quot;Winter&quot;</span>]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>seasons_crash[<span class="st">&quot;season&quot;</span>] <span class="op">=</span> pd.Categorical(seasons_crash[<span class="st">&quot;season&quot;</span>], categories<span class="op">=</span>seasons_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>sns.barplot(seasons_crash, x<span class="op">=</span><span class="st">&quot;year&quot;</span>, y<span class="op">=</span><span class="st">&quot;Number Of Collisions&quot;</span>, hue<span class="op">=</span><span class="st">&quot;season&quot;</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Number Of Collisions&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Year&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>, fontsize<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Number Of Collisions by Year and Season&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">&quot;Seasons&quot;</span>, loc<span class="op">=</span><span class="st">&quot;upper right&quot;</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/byyearseason.png" /></p>
</div>
</div>
<div class="cell markdown" id="G0D_Gw7z6dDN">
<p><strong>Main Causes of Crashes</strong></p>
</div>
<div class="cell code" data-execution_count="26"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="RGn2reNc6jfC" data-outputId="aab60365-4064-454a-9c87-bb65e97ed7eb">
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;contributing_factor_vehicle_1&quot;</span>].value_counts().head(<span class="dv">20</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="26">
<pre><code>Unspecified                       336261
Driver Inattention/Distraction    161355
Failure to Yield Right-of-Way      58439
Following Too Closely              30419
Other Vehicular                    29966
Backing Unsafely                   28674
Turning Improperly                 25403
Fatigued/Drowsy                    24677
Traffic Control Disregarded        20126
Passing or Lane Usage Improper     18799
Lost Consciousness                 14588
Passing Too Closely                13796
Driver Inexperience                13611
Prescription Medication            12060
Unsafe Lane Changing               11725
Alcohol Involvement                 8881
Unsafe Speed                        7744
Pavement Slippery                   7668
Physical Disability                 7151
Oversized Vehicle                   6283
Name: contributing_factor_vehicle_1, dtype: int64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="27"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:235}"
id="16b5ALEj6vhD" data-outputId="df0ee601-e713-49a7-81f3-f995f0894991">
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>top3_causes <span class="op">=</span> [<span class="st">&quot;Driver Inattention/Distraction&quot;</span>, <span class="st">&quot;Failure to Yield Right-of-Way&quot;</span>, <span class="st">&quot;Following Too Closely&quot;</span>]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>top3 <span class="op">=</span> df[df[<span class="st">&quot;contributing_factor_vehicle_1&quot;</span>].isin(top3_causes)]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>yrly_top3 <span class="op">=</span> top3.groupby([<span class="st">&quot;year&quot;</span>, <span class="st">&quot;contributing_factor_vehicle_1&quot;</span>]).size().reset_index(name<span class="op">=</span><span class="st">&quot;Number Of Collisions&quot;</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>yrly_top3.head(<span class="dv">6</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="27">

  <div id="df-20d66de8-b684-42c1-a6d8-c6c866afcea6" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>contributing_factor_vehicle_1</th>
      <th>Number Of Collisions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2012</td>
      <td>Driver Inattention/Distraction</td>
      <td>7101</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2012</td>
      <td>Failure to Yield Right-of-Way</td>
      <td>2846</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2012</td>
      <td>Following Too Closely</td>
      <td>41</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013</td>
      <td>Driver Inattention/Distraction</td>
      <td>14817</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013</td>
      <td>Failure to Yield Right-of-Way</td>
      <td>5607</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2013</td>
      <td>Following Too Closely</td>
      <td>92</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-20d66de8-b684-42c1-a6d8-c6c866afcea6')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-20d66de8-b684-42c1-a6d8-c6c866afcea6 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-20d66de8-b684-42c1-a6d8-c6c866afcea6');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-bc105b8d-7679-4e73-a974-a0e37c28dd1b">
  <button class="colab-df-quickchart" onclick="quickchart('df-bc105b8d-7679-4e73-a974-a0e37c28dd1b')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-bc105b8d-7679-4e73-a974-a0e37c28dd1b button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="28"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:718}"
id="NhcVunm67fgi" data-outputId="67fa84aa-7b17-4763-80d8-d9f65c28bc8d">
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>yrly_top3, x<span class="op">=</span><span class="st">&quot;year&quot;</span>, y<span class="op">=</span><span class="st">&quot;Number Of Collisions&quot;</span>, hue<span class="op">=</span><span class="st">&quot;contributing_factor_vehicle_1&quot;</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Number Of Collisions&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Year&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Comparison Of The Top 3 Factors Causing Road Collisons&quot;</span>, fontweight<span class="op">=</span><span class="st">&quot;bold&quot;</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/byfactor.png" /></p>
</div>
</div>
<section id="showing-correlation" class="cell markdown"
id="VaPXUIXgB_dw">
<h1>Showing correlation</h1>
</section>
<div class="cell code" data-execution_count="29"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:355}"
id="E6_0TZ8M-QII" data-outputId="f66e7c0c-1200-49e9-f16d-c584e92e599e">
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="29">

  <div id="df-17f2499b-bbeb-46d4-a7e5-546455a9bbe3" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>crash_date</th>
      <th>crash_time</th>
      <th>borough</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>on_street_name</th>
      <th>cross_street_name</th>
      <th>number_of_persons_injured</th>
      <th>number_of_persons_killed</th>
      <th>number_of_pedestrians_injured</th>
      <th>...</th>
      <th>contributing_factor_vehicle_2</th>
      <th>collision_id</th>
      <th>vehicle_type_code_1</th>
      <th>vehicle_type_code_2</th>
      <th>crash_hour</th>
      <th>day</th>
      <th>month</th>
      <th>year</th>
      <th>season</th>
      <th>consequences_of_an_accident</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>2021-12-14</td>
      <td>14:58:00</td>
      <td>MANHATTAN</td>
      <td>40.751440</td>
      <td>-73.973970</td>
      <td>3 AVENUE</td>
      <td>EAST 43 STREET</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4486519</td>
      <td>Sedan</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>14</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2021-12-14</td>
      <td>16:50:00</td>
      <td>QUEENS</td>
      <td>40.675884</td>
      <td>-73.755770</td>
      <td>SPRINGFIELD BOULEVARD</td>
      <td>EAST GATE PLAZA</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487127</td>
      <td>Sedan</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>16</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2021-12-14</td>
      <td>23:10:00</td>
      <td>QUEENS</td>
      <td>40.666840</td>
      <td>-73.789410</td>
      <td>NORTH CONDUIT AVENUE</td>
      <td>150 STREET</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4486635</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>23</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2021-12-11</td>
      <td>19:43:00</td>
      <td>BRONX</td>
      <td>40.872620</td>
      <td>-73.904686</td>
      <td>WEST KINGSBRIDGE ROAD</td>
      <td>HEATH AVENUE</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487040</td>
      <td>Station Wagon/Sport Utility Vehicle</td>
      <td>Sedan</td>
      <td>19</td>
      <td>11</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2021-12-13</td>
      <td>17:40:00</td>
      <td>STATEN ISLAND</td>
      <td>40.631650</td>
      <td>-74.087620</td>
      <td>VICTORY BOULEVARD</td>
      <td>WOODSTOCK AVENUE</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>...</td>
      <td>Unspecified</td>
      <td>4487001</td>
      <td>Sedan</td>
      <td>Sedan</td>
      <td>17</td>
      <td>13</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 26 columns</p>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-17f2499b-bbeb-46d4-a7e5-546455a9bbe3')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-17f2499b-bbeb-46d4-a7e5-546455a9bbe3 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-17f2499b-bbeb-46d4-a7e5-546455a9bbe3');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-6061368e-6149-4cc6-a235-d8daaabfd99b">
  <button class="colab-df-quickchart" onclick="quickchart('df-6061368e-6149-4cc6-a235-d8daaabfd99b')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-6061368e-6149-4cc6-a235-d8daaabfd99b button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="30" id="uWAVfTUJ-Rjb">
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_sub <span class="op">=</span> df.copy()</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># extract day/month/year</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>df_sub[<span class="st">&#39;day&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.day</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>df_sub[<span class="st">&#39;month&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.month</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>df_sub[<span class="st">&#39;year&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;crash_date&#39;</span>].dt.year</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="31" id="18aiTgQN_Mdr">
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>label_encoder <span class="op">=</span> LabelEncoder()</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>columns_to_encode <span class="op">=</span> [</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;borough&#39;</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contributing_factor_vehicle_1&#39;</span>,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;contributing_factor_vehicle_2&#39;</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;vehicle_type_code_2&#39;</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;vehicle_type_code_1&#39;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> columns_to_encode:</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    df_sub[col] <span class="op">=</span> label_encoder.fit_transform(df_sub[col])</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="32"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="qYx8Hbbg_j7X" data-outputId="fb757d9b-5cbd-4af6-dd06-c6d58ff7acc5">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df_sub.columns</span></code></pre></div>
<div class="output execute_result" data-execution_count="32">
<pre><code>Index([&#39;crash_date&#39;, &#39;crash_time&#39;, &#39;borough&#39;, &#39;latitude&#39;, &#39;longitude&#39;,
       &#39;on_street_name&#39;, &#39;cross_street_name&#39;, &#39;number_of_persons_injured&#39;,
       &#39;number_of_persons_killed&#39;, &#39;number_of_pedestrians_injured&#39;,
       &#39;number_of_pedestrians_killed&#39;, &#39;number_of_cyclist_injured&#39;,
       &#39;number_of_cyclist_killed&#39;, &#39;number_of_motorist_injured&#39;,
       &#39;number_of_motorist_killed&#39;, &#39;contributing_factor_vehicle_1&#39;,
       &#39;contributing_factor_vehicle_2&#39;, &#39;collision_id&#39;, &#39;vehicle_type_code_1&#39;,
       &#39;vehicle_type_code_2&#39;, &#39;crash_hour&#39;, &#39;day&#39;, &#39;month&#39;, &#39;year&#39;, &#39;season&#39;,
       &#39;consequences_of_an_accident&#39;],
      dtype=&#39;object&#39;)</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="33" id="KvxlvBzv_3fr">
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>df_sub[<span class="st">&#39;consequences_of_an_accident&#39;</span>] <span class="op">=</span> df[[</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_injured&#39;</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_killed&#39;</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_injured&#39;</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_killed&#39;</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_injured&#39;</span>,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_killed&#39;</span>,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_injured&#39;</span>,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_killed&#39;</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    ]].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="34"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="YrYzM-Zp9n2r" data-outputId="9b6939e2-d415-4bf1-f7fd-1422ee86221a">
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code></pre></div>
<div class="output stream stdout">
<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 880392 entries, 9 to 2034017
Data columns (total 26 columns):
 #   Column                         Non-Null Count   Dtype         
---  ------                         --------------   -----         
 0   crash_date                     880392 non-null  datetime64[ns]
 1   crash_time                     880392 non-null  object        
 2   borough                        880392 non-null  object        
 3   latitude                       880392 non-null  float64       
 4   longitude                      880392 non-null  float64       
 5   on_street_name                 880392 non-null  object        
 6   cross_street_name              880392 non-null  object        
 7   number_of_persons_injured      880392 non-null  float64       
 8   number_of_persons_killed       880392 non-null  float64       
 9   number_of_pedestrians_injured  880392 non-null  int64         
 10  number_of_pedestrians_killed   880392 non-null  int64         
 11  number_of_cyclist_injured      880392 non-null  int64         
 12  number_of_cyclist_killed       880392 non-null  int64         
 13  number_of_motorist_injured     880392 non-null  int64         
 14  number_of_motorist_killed      880392 non-null  int64         
 15  contributing_factor_vehicle_1  880392 non-null  object        
 16  contributing_factor_vehicle_2  880392 non-null  object        
 17  collision_id                   880392 non-null  int64         
 18  vehicle_type_code_1            880392 non-null  object        
 19  vehicle_type_code_2            880392 non-null  object        
 20  crash_hour                     880392 non-null  int64         
 21  day                            880392 non-null  int64         
 22  month                          880392 non-null  int64         
 23  year                           880392 non-null  int64         
 24  season                         880392 non-null  object        
 25  consequences_of_an_accident    880392 non-null  float64       
dtypes: datetime64[ns](1), float64(5), int64(11), object(9)
memory usage: 181.4+ MB
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="35" id="bIjILhptAeFt">
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>df_sub <span class="op">=</span> df_sub.drop(columns <span class="op">=</span> [</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;crash_date&#39;</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;crash_time&#39;</span>,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;on_street_name&#39;</span>,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;cross_street_name&#39;</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;collision_id&#39;</span>,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_injured&#39;</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_persons_killed&#39;</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_injured&#39;</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_pedestrians_killed&#39;</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_injured&#39;</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_cyclist_killed&#39;</span>,</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_injured&#39;</span>,</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;number_of_motorist_killed&#39;</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    ])</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="36"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:379}"
id="GpshdCAQA8Yc" data-outputId="febc9656-e2bf-4d83-d871-bd82416e2e9c">
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>df_sub.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="36">

  <div id="df-f2bf3e84-d0be-4c0d-a1c3-975e77fa46f3" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>borough</th>
      <th>latitude</th>
      <th>longitude</th>
      <th>contributing_factor_vehicle_1</th>
      <th>contributing_factor_vehicle_2</th>
      <th>vehicle_type_code_1</th>
      <th>vehicle_type_code_2</th>
      <th>crash_hour</th>
      <th>day</th>
      <th>month</th>
      <th>year</th>
      <th>season</th>
      <th>consequences_of_an_accident</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>2</td>
      <td>40.751440</td>
      <td>-73.973970</td>
      <td>35</td>
      <td>55</td>
      <td>444</td>
      <td>617</td>
      <td>14</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>3</td>
      <td>40.675884</td>
      <td>-73.755770</td>
      <td>52</td>
      <td>55</td>
      <td>444</td>
      <td>617</td>
      <td>16</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>3</td>
      <td>40.666840</td>
      <td>-73.789410</td>
      <td>43</td>
      <td>55</td>
      <td>444</td>
      <td>603</td>
      <td>23</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>0</td>
      <td>40.872620</td>
      <td>-73.904686</td>
      <td>55</td>
      <td>55</td>
      <td>455</td>
      <td>603</td>
      <td>19</td>
      <td>11</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>4</td>
      <td>40.631650</td>
      <td>-74.087620</td>
      <td>55</td>
      <td>55</td>
      <td>444</td>
      <td>603</td>
      <td>17</td>
      <td>13</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>27</th>
      <td>1</td>
      <td>40.687534</td>
      <td>-73.977500</td>
      <td>55</td>
      <td>55</td>
      <td>444</td>
      <td>74</td>
      <td>12</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>28</th>
      <td>1</td>
      <td>40.710957</td>
      <td>-73.951126</td>
      <td>36</td>
      <td>55</td>
      <td>70</td>
      <td>617</td>
      <td>17</td>
      <td>14</td>
      <td>12</td>
      <td>2021</td>
      <td>Winter</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>45</th>
      <td>0</td>
      <td>40.843906</td>
      <td>-73.924130</td>
      <td>3</td>
      <td>55</td>
      <td>489</td>
      <td>617</td>
      <td>21</td>
      <td>24</td>
      <td>4</td>
      <td>2022</td>
      <td>Spring</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>51</th>
      <td>2</td>
      <td>40.767242</td>
      <td>-73.986206</td>
      <td>58</td>
      <td>55</td>
      <td>455</td>
      <td>74</td>
      <td>15</td>
      <td>24</td>
      <td>4</td>
      <td>2022</td>
      <td>Spring</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>52</th>
      <td>1</td>
      <td>40.624170</td>
      <td>-73.970480</td>
      <td>55</td>
      <td>55</td>
      <td>444</td>
      <td>515</td>
      <td>12</td>
      <td>22</td>
      <td>4</td>
      <td>2022</td>
      <td>Spring</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-f2bf3e84-d0be-4c0d-a1c3-975e77fa46f3')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-f2bf3e84-d0be-4c0d-a1c3-975e77fa46f3 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-f2bf3e84-d0be-4c0d-a1c3-975e77fa46f3');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-382b8d11-7056-44ad-9228-5c82e5321dfa">
  <button class="colab-df-quickchart" onclick="quickchart('df-382b8d11-7056-44ad-9228-5c82e5321dfa')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-382b8d11-7056-44ad-9228-5c82e5321dfa button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>
    </div>
  </div>

</div>
</div>
<div class="cell code" data-execution_count="37"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="NOOzBiDYA-Qp" data-outputId="f53b315f-d4a2-4398-84a9-1992b37e4850">
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>overall_correlation <span class="op">=</span> df_sub.corr()</span></code></pre></div>
<div class="output stream stderr">
<pre><code>&lt;ipython-input-37-66d9398e0358&gt;:1: FutureWarning: The default value of numeric_only in DataFrame.corr is deprecated. In a future version, it will default to False. Select only valid columns or specify the value of numeric_only to silence this warning.
  overall_correlation = df_sub.corr()
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="38"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:894}"
id="8jSGGwMBBBoi" data-outputId="a2a6fb3a-7d27-4a5f-be19-bbf02c66bcdc">
<div class="sourceCode" id="cb50"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>sns.heatmap(overall_correlation, annot <span class="op">=</span> <span class="va">True</span>, fmt<span class="op">=</span><span class="st">&#39;.3f&#39;</span>, cmap <span class="op">=</span> <span class="st">&#39;crest&#39;</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Correlation Matrix&#39;</span>, fontweight <span class="op">=</span> <span class="st">&#39;bold&#39;</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="/static/img/nb/corr.png" /></p>
</div>
</div>
</body>
</html>
